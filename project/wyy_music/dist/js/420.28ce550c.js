"use strict";(self["webpackChunkvue2_music"]=self["webpackChunkvue2_music"]||[]).push([[420],{6420:function(s,t,i){i.r(t),i.d(t,{default:function(){return x}});i(7658);var a=function(){var s=this,t=s._self._c;return t("div",{staticClass:"m-tabct"},[t("div",{staticClass:"tabct-item"},[t("div",{staticClass:"m-hmsrch"},[t("form",{attrs:{action:""}},[t("div",{staticClass:"input-cover"},[t("i",{staticClass:"srch-svg"}),t("input",{directives:[{name:"model",rawName:"v-model",value:s.songValue,expression:"songValue"}],attrs:{type:"text",placeholder:"搜索歌曲、歌手、专辑"},domProps:{value:s.songValue},on:{focus:function(t){s.suggestArtists=null},keyup:function(t){return!t.type.indexOf("key")&&s._k(t.keyCode,"enter",13,t.key,"Enter")?null:s.getSuggestSongs(s.songValue)},input:function(t){t.target.composing||(s.songValue=t.target.value)}}}),t("figure",{directives:[{name:"show",rawName:"v-show",value:s.songValue,expression:"songValue"}],staticClass:"close",on:{click:s.clearValue}},[t("i",{staticClass:"empty-svg"})])])]),s.loading?t("div",{staticClass:"loading"}):s._e(),s.songValue?s._e():t("div",{staticClass:"m-default"},[t("section",{staticClass:"hot-list"},[t("h3",[s._v("热门搜索")]),t("ul",{staticClass:"list"},s._l(s.hotSongs,(function(i,a){return t("li",{key:a,on:{click:function(t){s.songValue=i.first,s.getSuggestSongs(i.first)}}},[s._v(" "+s._s(i.first))])})),0)])]),s.songValue&&null===s.suggestArtists?t("section",{directives:[{name:"show",rawName:"v-show",value:!s.loading,expression:"!loading"}],staticClass:"m-recom"},[t("h3",{staticClass:"title"},[s._v("搜索“"+s._s(s.songValue)+"”")]),t("ul",s._l(s.searchSong,(function(i,a){return t("SearchSong",{key:a,attrs:{song:i},nativeOn:{click:function(t){s.getSuggestSongs(i.keyword),s.songValue=i.keyword}}})})),1)]):s._e(),s.songValue?s._e():t("section",{directives:[{name:"show",rawName:"v-show",value:!s.loading,expression:"!loading"}],staticClass:"srch-history"},s._l(s.searchHistory,(function(i,a){return t("ul",{key:a},[t("li",{staticClass:"history-list",on:{click:function(t){s.getSuggestSongs(i.name),s.songValue=i.name}}},[t("i",{staticClass:"clock-his"}),t("div",{staticClass:"his-text"},[t("span",[s._v(s._s(i.name))]),t("figure",[t("i",{staticClass:"u-empty-svg",on:{click:function(t){return t.stopPropagation(),s.deleteHistory(i.name)}}})])])])])})),0),s.songValue&&null!==s.suggestArtists&&!s.singerIntroduce?t("div",{directives:[{name:"show",rawName:"v-show",value:!s.loading,expression:"!loading"}],staticClass:"srch-result"},[t("section",{staticClass:"match-list"},[t("h3",{staticClass:"title"},[s._v("最佳匹配")]),t("ul",[s._l(s.suggestArtists,(function(i){return t("li",{key:i.id,staticClass:"match-item",on:{click:function(t){s.singerIntroduce=!0,s.getSingerIntro(i.id)}}},[t("div",{staticClass:"ling-cover"},[t("figure",[t("img",{attrs:{src:i.img1v1Url,alt:""}})]),t("article",[t("h4",[s._v(s._s(i.occupation)+": "),t("p",[s._v(s._s(i.name))]),i.trans?t("p",[s._v(" ("+s._s(i.alias[0]||i.trans)+")")]):s._e()])]),t("i",{staticClass:"u-svg-arr"})])])})),s._l(s.suggestPlayList,(function(i){return t("li",{key:i.name,staticClass:"match-item",on:{click:function(t){return s.$router.push({path:"/playlist",query:{id:i.id}})}}},[t("div",{staticClass:"ling-cover"},[t("figure",[t("img",{attrs:{src:i.coverImgUrl,alt:""}})]),t("article",[t("h4",[s._v("歌单: "),t("p",[s._v(s._s(i.name))])]),t("p",{staticClass:"h-cover"},[s._v("by "+s._s(i.creator.nickname))])]),t("i",{staticClass:"u-svg-arr"})])])}))],2)]),t("section",{staticClass:"song-list"},[t("ul",s._l(s.cloundResult,(function(i){return t("SearchSongList",{key:i.id,attrs:{cdResult:i,playing:s.playing,songId:s.songId},on:{"update-song":function(t){return s.$emit("update-song",t)}},nativeOn:{click:function(t){return s.$emit("update-song-list",s.cloundResult)}}})})),1)])]):s._e(),s.singerIntroduce?t("div",{staticClass:"singer"},[t("SingerDetails",{attrs:{singerIntroduce:s.singerIntroduce,singerDetail:s.singerDetail,singetHotSongs:s.singetHotSongs,playing:s.playing,songId:s.songId},on:{"update-song":function(t){return s.$emit("update-song",t)},"update-song-list":function(t){return s.$emit("update-song-list",t)}}})],1):s._e()])])])},e=[],n=(i(541),function(){var s=this,t=s._self._c;return t("div",[t("li",{staticClass:"item"},[t("i",{staticClass:"search-svg"}),t("span",[s._v(s._s(s.song.keyword))])])])}),l=[],r={props:{song:Object},data(){return{}}},o=r,c=i(1001),g=(0,c.Z)(o,n,l,!1,null,"644ca9ea",null),u=g.exports,d=function(){var s=this,t=s._self._c;return t("li",{staticClass:"song-item",on:{click:function(t){return s.$emit("update-song",s.cdResult)}}},[t("div",{staticClass:"song"},[t("div",{staticClass:"song-name"},[s._v(s._s(s.cdResult.name))]),t("div",{staticClass:"song-introduce"},[t("div",{staticClass:"sq"},[null!==s.cdResult.sq?t("i"):s._e(),t("span",[s._v(s._s(s.cdResultAuthor[0].name))]),s.cdResultAuthor.length>=2?t("span",[s._v(" / "+s._s(s.cdResultAuthor[1].name))]):s._e(),t("span",[s._v(" - "+s._s(s.cdResult.al.name))])])])]),s.cdResult.id!==s.songId?t("div",{staticClass:"song-play"}):t("div",{staticClass:"song-play active",class:{playing:s.playing}},[t("span",[s._v(".")]),t("span",[s._v(".")]),t("span",[s._v(".")]),t("span",[s._v(".")])])])},h=[],v={props:{cdResult:Object,playing:Boolean,songId:Number},data(){return{cdResultAuthor:this.cdResult.ar}},components:{}},p=v,_=(0,c.Z)(p,d,h,!1,null,"2c1d7a66",null),m=_.exports,f=function(){var s=this,t=s._self._c;return t("div",{staticClass:"singerDetail"},[t("i",{staticClass:"fa fa-angle-left",attrs:{"aria-hidden":"true"},on:{click:function(t){s.$parent.singerIntroduce=!1}}}),t("div",{staticClass:"singer-hd"},[t("img",{staticClass:"hd-pc",attrs:{src:s.singerDetail.artist?.cover,alt:""}}),t("div",{staticClass:"singer-info"},[t("p",{staticClass:"name"},[s._v(s._s(s.singerDetail.artist?.name))]),s.singerDetail.artist?.rank?t("div",{staticClass:"rank"},[s._v("歌手榜华语地区NO."+s._s(s.singerDetail.artist?.rank.rank))]):s._e(),t("div",{staticClass:"simple"},[t("div",{staticClass:"nickname"},[s._v(" 昵称："+s._s(s.singerDetail.user?.nickname)+" "),s.singerDetail.user?.avatarDetail?t("img",{attrs:{src:`${s.singerDetail.user.avatarDetail?.identityIconUrl}?imageView=1&type=webp&thumbnail=12x0`}}):s._e()]),t("div",{staticClass:"follow"},[s._v("关注 22 | 粉丝 629.3万")]),t("div",{staticClass:"identities"},[s._l(s.singerDetail.artist?.identifyTag,(function(i){return t("span",{key:i},[s._v(s._s(i))])})),s._l(s.singerDetail.artist?.identities,(function(i,a){return t("span",{key:a,staticClass:"its"},[s._v(s._s(i))])}))],2)])])]),t("h2",[s._v("歌手简介")]),t("div",{staticClass:"intro"},[t("p",{class:{all:s.isclick}},[s._v(s._s(s.singerDetail.artist?.briefDesc))]),s.singerDetail.artist?.briefDesc.length>100&&!s.isclick?t("div",{staticClass:"all-intro",on:{click:function(t){s.isclick=!0}}},[t("span",[s._v("完整歌手介绍")]),t("i",{staticClass:"fa fa-angle-down",attrs:{"aria-hidden":"true"}})]):s._e(),s.singerDetail.artist?.briefDesc.length>100&&s.isclick?t("div",{staticClass:"all-intro",on:{click:function(t){s.isclick=!1}}},[t("span",[s._v("收起")]),t("i",{staticClass:"fa fa-angle-up",attrs:{"aria-hidden":"true"}})]):s._e()]),t("h2",[s._v("热门单曲")]),t("ul",s._l(s.singetHotSongs,(function(i,a){return t("li",{key:a,staticClass:"song-item",on:{click:function(t){s.$emit("update-song",i),s.$emit("update-song-list",s.singetHotSongs)}}},[t("div",{staticClass:"ranking"},[s._v(s._s(a>=9?a+1:"0"+(a+1)))]),t("div",{staticClass:"song-box"},[t("div",{staticClass:"song"},[t("div",{staticClass:"song-name"},[t("span",{staticClass:"name"},[s._v(s._s(i.name))]),i.alia.length?t("div",{staticClass:"alia"},s._l(i.alia,(function(i,a){return t("span",{key:a},[s._v("("+s._s(i)+")")])})),0):s._e()]),t("div",{staticClass:"song-introduce"},[null!==i.sq?t("i"):s._e(),t("span",[s._v(s._s(i.ar[0].name))]),i.ar.length>=2?t("span",[s._v(" / "+s._s(i.ar[1].name))]):s._e(),t("span",[s._v(" - "+s._s(i.al.name))])])]),i.id!==s.songId?t("div",{staticClass:"song-play"}):t("div",{staticClass:"song-play active",class:{playing:s.playing}},[t("span",[s._v(".")]),t("span",[s._v(".")]),t("span",[s._v(".")]),t("span",[s._v(".")])])])])})),0)])},C=[],y={props:{singerDetail:Object,singetHotSongs:Array,playing:Boolean,songId:[Number,String]},data(){return{hotSongs:[],isclick:!1}}},k=y,S=(0,c.Z)(k,f,C,!1,null,"0d290332",null),w=S.exports,D={props:{playing:Boolean,songId:[Number,String]},components:{SearchSong:u,SearchSongList:m,SingerDetails:w},data(){return{hotSongs:[],songValue:"",searchSong:[],searchHistory:JSON.parse(localStorage.getItem("searchHistory"))||[],cloundResult:[],suggestArtists:null,suggestPlayList:[],loading:!1,singerIntroduce:!1,singerDetail:{},singetHotSongs:[]}},methods:{clearValue:function(){this.searchHistory=this.searchHistory.filter((s=>this.songValue!=s.name)),this.searchHistory.unshift({name:this.songValue}),this.songValue=""},deleteHistory:function(s){this.searchHistory=this.searchHistory.filter((t=>s!=t.name))},getSuggestSongs:function(s){this.loading=!0,Promise.all([this.axios.get("https://apis.netstart.cn/music/cloudsearch?keywords="+s),this.axios.get("https://apis.netstart.cn/music/search/multimatch?keywords="+s)]).then((([s,t])=>{this.loading=!1,this.cloundResult=s.data.result.songs,this.suggestArtists=t.data.result.artist,this.suggestPlayList=t.data.result.playlist}))},getSingerIntro:function(s){Promise.all([this.axios.get("https://apis.netstart.cn/music/artist/detail",{params:{id:s}}),this.axios.get("https://apis.netstart.cn/music/artists",{params:{id:s}})]).then((([s,t])=>{this.singerDetail=s.data.data,this.singetHotSongs=t.data.hotSongs.slice(0,5)}))}},created(){this.loading=!0,this.axios.get("https://apis.netstart.cn/music/search/hot").then((s=>{this.loading=!1,this.hotSongs=s.data.result.hots}))},watch:{songValue:function(s){s?(this.loading=!0,this.axios.get("https://apis.netstart.cn/music/search/suggest?keywords="+s+"&type=mobile").then((s=>{this.loading=!1,this.searchSong=s.data.result.allMatch}))):this.searchSong=[]},searchHistory:function(s){localStorage.setItem("searchHistory",JSON.stringify(s))}}},V=D,I=(0,c.Z)(V,a,e,!1,null,"7a6a392b",null),x=I.exports}}]);
//# sourceMappingURL=420.28ce550c.js.map